{% extends "base.html" %}

{% block title %}Inbox - ARGent{% endblock %}

{% block content %}
<div class="inbox-page">
    <div class="inbox-header">
        <a href="/hub" class="back-btn">&larr;</a>
        <h1>Email</h1>
        <a href="/inbox/compose" class="btn btn-primary compose-btn">Compose</a>
    </div>

    <div class="message-list">
        {% if messages %}
            {% for msg in messages %}
            <a href="/inbox/thread/{{ msg.id }}" class="message-item {% if not msg.read_at %}unread{% endif %}">
                <div class="message-sender-col">
                    {% if msg.avatar_url %}
                    <img src="{{ msg.avatar_url }}" alt="" class="sender-avatar">
                    {% endif %}
                    <span class="message-from">{{ msg.sender_name or 'Unknown' }}</span>
                </div>
                <div class="message-subject">{{ msg.subject or '(no subject)' }}</div>
                <div class="message-preview">{{ (msg.content or '')[:100] | replace('\n', ' ') }}{% if (msg.content or '')|length > 100 %}...{% endif %}</div>
                <div class="message-date">{{ msg.created_at.strftime('%b %d') }}</div>
            </a>
            {% endfor %}
        {% else %}
            <div class="empty-inbox">
                <p>Waiting for messages...</p>
                <p class="empty-hint">They'll find you when they're ready.</p>
            </div>
        {% endif %}
    </div>
</div>

{% include "partials/bottom_nav.html" %}
{% endblock %}
